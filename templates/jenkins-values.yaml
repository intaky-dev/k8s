# Jenkins Helm Chart Values
# Ultra-minimal configuration - No default plugins

controller:
  # Jenkins Controller Configuration
  componentName: "jenkins-controller"

  # Resources
  resources:
    requests:
      cpu: "500m"
      memory: "2Gi"
    limits:
      cpu: "2000m"
      memory: "4Gi"

  # Java options
  javaOpts: "-Xms2048m -Xmx2048m"

  # Service configuration
  serviceType: ClusterIP
  servicePort: 8080

  # Install only minimal essential plugins
  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git

  # Jenkins Configuration as Code - DISABLE DEFAULT CONFIG
  JCasC:
    defaultConfig: false
    configScripts:
      jenkins-config: |
        jenkins:
          systemMessage: "Jenkins CI/CD Server"
          numExecutors: 0
          clouds:
            - kubernetes:
                name: "kubernetes"
                serverUrl: "https://kubernetes.default"
                namespace: "jenkins"
                jenkinsUrl: "http://jenkins:8080"
                jenkinsTunnel: "jenkins-agent:50000"
                containerCapStr: "10"
                templates:
                  - name: "jenkins-agent"
                    label: "jenkins-agent"
                    containers:
                      - name: "jnlp"
                        image: "jenkins/inbound-agent:latest"
                        workingDir: "/home/jenkins/agent"
                        resourceRequestCpu: "500m"
                        resourceRequestMemory: "512Mi"
                        resourceLimitCpu: "1000m"
                        resourceLimitMemory: "1Gi"
        security:
          remotingCLI:
            enabled: false

# Persistence for Jenkins home
persistence:
  enabled: true
  storageClass: "local-path"
  size: "20Gi"

# Service Account
serviceAccount:
  create: true
  name: jenkins

# RBAC
rbac:
  create: true
  readSecrets: true
